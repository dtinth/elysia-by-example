"built-in Example request: `GET /crash/error`":
  command:
    - "curl -s -D- http://localhost:3000/crash/error "
  result:
    - "HTTP/1.1 500 Internal Server Error"
    - "content-type: text/plain;charset=utf-8"
    - "Date: Wed, 25 Dec 2024 09:40:19 GMT"
    - "Content-Length: 50"
    - ""
    - "{\"name\":\"Error\",\"message\":\"Something went wrong!\"}"
  log:
    - "[onError] {"
    - "  error: Error: Something went wrong!"
    - "      at <anonymous> \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mexamples/errors/built-in.example.ts:11:15\u001b[90m)\u001b[39m"
    - "      at <anonymous> \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mexamples/errors/built-in.example.ts:10:24\u001b[90m)\u001b[39m"
    - "      at <anonymous> \u001b[90m(file:///Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/dist/bun/index.js:5:76\u001b[90m)\u001b[39m"
    - "      at handle \u001b[90m(file:///Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/dist/bun/index.js:5:80\u001b[90m)\u001b[39m"
    - "      at map \u001b[90m(file:///Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/dist/bun/index.js:22:108\u001b[90m)\u001b[39m"
    - "      at <anonymous> \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mindex.ts:239:26\u001b[90m)\u001b[39m"
    - "      at fetch \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mindex.ts:238:21\u001b[90m)\u001b[39m {"
    - "    originalLine: \u001b[33m7\u001b[39m,"
    - "    originalColumn: \u001b[33m18\u001b[39m"
    - "  },"
    - "  code: \u001b[32m'UNKNOWN'\u001b[39m"
    - "}"
"built-in Example request: `GET /crash/internal`":
  command:
    - "curl -s -D- http://localhost:3000/crash/internal "
  result:
    - "HTTP/1.1 500 Internal Server Error"
    - "content-type: text/plain;charset=utf-8"
    - "Date: Wed, 25 Dec 2024 09:40:19 GMT"
    - "Content-Length: 21"
    - ""
    - "Something went wrong!"
  log:
    - "[onError] {"
    - "  error: InternalServerError: Something went wrong!"
    - "      at new InternalServerError \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/src/error.ts:68:3\u001b[90m)\u001b[39m"
    - "      at <anonymous> \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mexamples/errors/built-in.example.ts:8:15\u001b[90m)\u001b[39m"
    - "      at <anonymous> \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mexamples/errors/built-in.example.ts:7:27\u001b[90m)\u001b[39m"
    - "      at <anonymous> \u001b[90m(file:///Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/dist/bun/index.js:5:76\u001b[90m)\u001b[39m"
    - "      at handle \u001b[90m(file:///Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/dist/bun/index.js:5:80\u001b[90m)\u001b[39m"
    - "      at map \u001b[90m(file:///Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/dist/bun/index.js:20:95\u001b[90m)\u001b[39m"
    - "      at <anonymous> \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mindex.ts:239:26\u001b[90m)\u001b[39m"
    - "      at fetch \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mindex.ts:238:21\u001b[90m)\u001b[39m {"
    - "    code: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m,"
    - "    status: \u001b[33m500\u001b[39m,"
    - "    originalLine: \u001b[33m2\u001b[39m,"
    - "    originalColumn: \u001b[33m29320\u001b[39m"
    - "  },"
    - "  code: \u001b[32m'INTERNAL_SERVER_ERROR'\u001b[39m"
    - "}"
"built-in Example request: `GET /nonexistent`":
  command:
    - "curl -s -D- http://localhost:3000/nonexistent "
  result:
    - "HTTP/1.1 404 Not Found"
    - "content-type: text/plain;charset=utf-8"
    - "Date: Wed, 25 Dec 2024 09:40:19 GMT"
    - "Content-Length: 9"
    - ""
    - "NOT_FOUND"
  log:
    - "[onError] {"
    - "  error: NotFoundError: NOT_FOUND"
    - "      at new NotFoundError \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/src/error.ts:77:3\u001b[90m)\u001b[39m"
    - "      at anonymous \u001b[90m(file:///Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/dist/bun/index.js:11:33\u001b[90m)\u001b[39m"
    - "      at fetch \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/src/index.ts:5970:6\u001b[90m)\u001b[39m"
    - "      at <anonymous> \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mindex.ts:239:26\u001b[90m)\u001b[39m"
    - "      at fetch \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mindex.ts:238:21\u001b[90m)\u001b[39m {"
    - "    code: \u001b[32m'NOT_FOUND'\u001b[39m,"
    - "    status: \u001b[33m404\u001b[39m,"
    - "    originalLine: \u001b[33m2\u001b[39m,"
    - "    originalColumn: \u001b[33m29444\u001b[39m"
    - "  },"
    - "  code: \u001b[32m'NOT_FOUND'\u001b[39m"
    - "}"
"built-in Example request: `GET /validate`":
  command:
    - "curl -s -D- http://localhost:3000/validate "
  result:
    - "HTTP/1.1 422 Unprocessable Entity"
    - "Content-Type: application/json"
    - "Date: Wed, 25 Dec 2024 09:40:19 GMT"
    - "Content-Length: 682"
    - ""
    - "{"
    - "  \"type\": \"validation\","
    - "  \"on\": \"query\","
    - "  \"summary\": \"Property 'name' is missing\","
    - "  \"property\": \"/name\","
    - "  \"message\": \"Expected required property\","
    - "  \"expected\": {"
    - "    \"name\": \"\""
    - "  },"
    - "  \"found\": {},"
    - "  \"errors\": ["
    - "    {"
    - "      \"type\": 45,"
    - "      \"schema\": {"
    - "        \"type\": \"string\""
    - "      },"
    - "      \"path\": \"/name\","
    - "      \"message\": \"Expected required property\","
    - "      \"errors\": [],"
    - "      \"summary\": \"Property 'name' is missing\""
    - "    },"
    - "    {"
    - "      \"type\": 54,"
    - "      \"schema\": {"
    - "        \"type\": \"string\""
    - "      },"
    - "      \"path\": \"/name\","
    - "      \"message\": \"Expected string\","
    - "      \"errors\": [],"
    - "      \"summary\": \"Expected  property 'name' to be  string but found: undefined\""
    - "    }"
    - "  ]"
    - "}"
  log:
    - "[onError] {"
    - "  error: ValidationError: {"
    - "    \"type\": \"validation\","
    - "    \"on\": \"query\","
    - "    \"summary\": \"Property 'name' is missing\","
    - "    \"property\": \"/name\","
    - "    \"message\": \"Expected required property\","
    - "    \"expected\": {"
    - "      \"name\": \"\""
    - "    },"
    - "    \"found\": {},"
    - "    \"errors\": ["
    - "      {"
    - "        \"type\": 45,"
    - "        \"schema\": {"
    - "          \"type\": \"string\""
    - "        },"
    - "        \"path\": \"/name\","
    - "        \"message\": \"Expected required property\","
    - "        \"errors\": [],"
    - "        \"summary\": \"Property 'name' is missing\""
    - "      },"
    - "      {"
    - "        \"type\": 54,"
    - "        \"schema\": {"
    - "          \"type\": \"string\""
    - "        },"
    - "        \"path\": \"/name\","
    - "        \"message\": \"Expected string\","
    - "        \"errors\": [],"
    - "        \"summary\": \"Expected  property 'name' to be  string but found: undefined\""
    - "      }"
    - "    ]"
    - "  }"
    - "      at new ValidationError \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/src/error.ts:264:3\u001b[90m)\u001b[39m"
    - "      at <anonymous> \u001b[90m(file:///Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/dist/bun/index.js:14:86\u001b[90m)\u001b[39m"
    - "      at handle \u001b[90m(file:///Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/dist/bun/index.js:5:80\u001b[90m)\u001b[39m"
    - "      at map \u001b[90m(file:///Users/dtinth/Projects/elysia-by-example/\u001b[39mnode_modules/\u001b[4melysia\u001b[24m/dist/bun/index.js:26:102\u001b[90m)\u001b[39m"
    - "      at <anonymous> \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mindex.ts:239:26\u001b[90m)\u001b[39m"
    - "      at fetch \u001b[90m(/Users/dtinth/Projects/elysia-by-example/\u001b[39mindex.ts:238:21\u001b[90m)\u001b[39m {"
    - "    type: \u001b[32m'query'\u001b[39m,"
    - "    validator: TypeCheck {"
    - "      schema: \u001b[36m[Object]\u001b[39m,"
    - "      references: [],"
    - "      checkFunc: \u001b[36m[Function: check]\u001b[39m,"
    - "      code: \u001b[32m'return function check(value) {\\n'\u001b[39m +"
    - "        \u001b[32m'  return (\\n'\u001b[39m +"
    - "        \u001b[32m\"    (typeof value === 'object' && value !== null && !Array.isArray(value)) &&\\n\"\u001b[39m +"
    - "        \u001b[32m\"    (typeof value.name === 'string') &&\\n\"\u001b[39m +"
    - "        \u001b[32m'    Object.getOwnPropertyNames(value).length === 1\\n'\u001b[39m +"
    - "        \u001b[32m'  )\\n'\u001b[39m +"
    - "        \u001b[32m'}'\u001b[39m,"
    - "      hasTransform: \u001b[33mfalse\u001b[39m,"
    - "      Clean: \u001b[36m[Function (anonymous)]\u001b[39m,"
    - "      parse: \u001b[36m[Function (anonymous)]\u001b[39m,"
    - "      safeParse: \u001b[36m[Function (anonymous)]\u001b[39m"
    - "    },"
    - "    value: {},"
    - "    code: \u001b[32m'VALIDATION'\u001b[39m,"
    - "    status: \u001b[33m422\u001b[39m,"
    - "    originalLine: \u001b[33m2\u001b[39m,"
    - "    originalColumn: \u001b[33m32076\u001b[39m"
    - "  },"
    - "  code: \u001b[32m'VALIDATION'\u001b[39m"
    - "}"
"built-in Example request: `POST /body`":
  command:
    - "curl -s -D- http://localhost:3000/body -X POST -H \"Content-Type: application/json\" -d '{' "
  result:
    - "HTTP/1.1 500 Internal Server Error"
    - "content-type: text/plain;charset=utf-8"
    - "Date: Wed, 25 Dec 2024 09:38:44 GMT"
    - "Content-Length: 55"
    - ""
    - "{\"name\":\"SyntaxError\",\"message\":\"Failed to parse JSON\"}"
  log:
    - "[onError] { error: [SyntaxError: Failed to parse JSON], code: \u001b[32m'UNKNOWN'\u001b[39m }"
"custom-status-response Example request: `GET /return`":
  command:
    - "curl -s -D- http://localhost:3000/return "
  result:
    - "HTTP/1.1 418 I'm a Teapot"
    - "Content-Type: application/json;charset=utf-8"
    - "Date: Wed, 25 Dec 2024 09:38:44 GMT"
    - "Content-Length: 19"
    - ""
    - "{\"message\":\"meow!\"}"
  log:
    - ""
"custom-status-response Example request: `GET /throw`":
  command:
    - "curl -s -D- http://localhost:3000/throw "
  result:
    - "HTTP/1.1 418 I'm a Teapot"
    - "content-type: text/plain;charset=utf-8"
    - "Date: Wed, 25 Dec 2024 09:38:44 GMT"
    - "Content-Length: 15"
    - ""
    - "[object Object]"
  log:
    - "[onError] \u001b[33m418\u001b[39m"
"error-in-schema Example request: A failing request with wrong inner type":
  command:
    - "curl -s -D- -X POST \"http://localhost:3000\" -H \"Content-Type: application/json\" -d '{\"x\": \"wat\"}' "
  result:
    - "HTTP/1.1 422 Unprocessable Entity"
    - "Content-Type: application/json"
    - "Date: Wed, 25 Dec 2024 09:38:44 GMT"
    - "Content-Length: 18"
    - ""
    - "x must be a number"
  log:
    - ""
"error-in-schema Example request: A failing request with wrong outer type":
  command:
    - "curl -s -D- -X POST \"http://localhost:3000\" -H \"Content-Type: application/json\" -d '42' "
  result:
    - "HTTP/1.1 422 Unprocessable Entity"
    - "Content-Type: application/json"
    - "Date: Wed, 25 Dec 2024 09:38:44 GMT"
    - "Content-Length: 626"
    - ""
    - "{"
    - "  \"type\": \"validation\","
    - "  \"on\": \"body\","
    - "  \"summary\": \"Expected object\","
    - "  \"property\": \"root\","
    - "  \"message\": \"Expected object\","
    - "  \"expected\": {"
    - "    \"x\": 0"
    - "  },"
    - "  \"found\": 42,"
    - "  \"errors\": ["
    - "    {"
    - "      \"summary\": \"Expected object\","
    - "      \"type\": 46,"
    - "      \"schema\": {"
    - "        \"type\": \"object\","
    - "        \"properties\": {"
    - "          \"x\": {"
    - "            \"error\": \"x must be a number\","
    - "            \"type\": \"number\""
    - "          }"
    - "        },"
    - "        \"required\": ["
    - "          \"x\""
    - "        ],"
    - "        \"additionalProperties\": false"
    - "      },"
    - "      \"path\": \"\","
    - "      \"value\": 42,"
    - "      \"message\": \"Expected object\","
    - "      \"errors\": []"
    - "    }"
    - "  ]"
    - "}"
  log:
    - ""
"error-in-schema Example request: A successful request":
  command:
    - "curl -s -D- -X POST \"http://localhost:3000\" -H \"Content-Type: application/json\" -d '{\"x\": 1}' "
  result:
    - "HTTP/1.1 200 OK"
    - "content-type: text/plain;charset=utf-8"
    - "Date: Wed, 25 Dec 2024 09:38:44 GMT"
    - "Content-Length: 12"
    - ""
    - "Hello World!"
  log:
    - ""
"model Example request: A failing request - 418":
  command:
    - "curl -s -D- \"http://localhost:3000?crash=418\" "
  result:
    - "HTTP/1.1 418 I'm a Teapot"
    - "Content-Type: application/json;charset=utf-8"
    - "Date: Wed, 25 Dec 2024 09:38:44 GMT"
    - "Content-Length: 28"
    - ""
    - "{\"error\":{\"message\":\"meow\"}}"
  log:
    - ""
"model Example request: A failing request - 500":
  command:
    - "curl -s -D- \"http://localhost:3000?crash=500\" "
  result:
    - "HTTP/1.1 500 Internal Server Error"
    - "Content-Type: application/json;charset=utf-8"
    - "Date: Wed, 25 Dec 2024 09:38:44 GMT"
    - "Content-Length: 47"
    - ""
    - "{\"error\":{\"message\":\"Something went wrong...\"}}"
  log:
    - ""
"model Example request: A successful request":
  command:
    - "curl -s -D- \"http://localhost:3000?crash=no\" "
  result:
    - "HTTP/1.1 200 OK"
    - "Content-Type: application/json;charset=utf-8"
    - "Date: Wed, 25 Dec 2024 09:38:44 GMT"
    - "Content-Length: 11"
    - ""
    - "{\"ok\":true}"
  log:
    - ""
